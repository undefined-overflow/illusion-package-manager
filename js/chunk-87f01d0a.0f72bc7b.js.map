{"version":3,"sources":["webpack:///./src/views/library/plugins.vue?aae1","webpack:///./src/views/library/plugins.vue","webpack:///./src/client/plugins/index.ts","webpack:///./src/api/plugins/index.ts","webpack:///./src/views/library/plugins.vue?516e","webpack:///./src/views/library/plugins.vue?55a8","webpack:///./src/views/library/plugins.vue?b351"],"names":["class","plugins","plugin","key","guid","t","installed","version","install","then","response","json","game","headers","body","JSON","stringify","method","props","required","type","String","methods","mark","this","find","p","dependencies","dep","setup","value","map","found","render","__scopeId"],"mappings":"kKAAA,W,sICCWA,MAAM,W,GAENA,MAAM,sB,GACHA,MAAM,iB,GACPA,MAAM,Q,SACNA,MAAM,W,wEALjB,eASU,UATV,EASU,E,mBARR,eAOM,2BAP+B,EAAAC,SAAO,SAAjBC,G,wBAA3B,eAOM,OAPDF,MAAM,SAAoCG,IAAKD,EAAOE,M,CACzD,eAAmF,MAAnF,EAAmF,eAAhD,EAAAC,EAAA,kBAAaH,EAAOE,KAApB,kBAAwB,GAC3D,eAIS,SAJT,EAIS,CAHP,eAA8D,MAA9D,EAA8D,eAAzC,EAAAC,EAAA,kBAAaH,EAAOE,KAApB,WAAwB,GAClBF,EAAOI,W,iBAAlC,eAAuE,MAAvE,EAAuE,eAAvBJ,EAAOK,SAAO,K,iBAC9D,eAAiE,O,MAA5DP,MAAM,SAAU,QAAK,mBAAE,EAAAQ,QAAQN,KAAgB,UAAO,uB,yGCDtD,EAAgB,SAACE,GAAD,OAC3B,eAAc,WAAD,OAAYA,IAAQK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,WAEhD,EAAkB,SAACT,EAAgBU,GAAjB,OAC7B,eAAc,WAAD,OAAYV,GAAU,CACjCW,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEJ,SACvBK,OAAQ,U,wBCVC,EAAa,SAACb,GAAD,OACxB,eAAW,iBAAD,OAAkBA,EAAlB,UAA+BK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,WCMtD,iBAAgB,CAC7BO,MAAO,CACLd,KAAM,CAAEe,UAAU,EAAMC,KAAMC,SAGhCC,QAAS,CACDd,QADC,SACON,GAAgB,wKACtB,EAAgBA,EAAOE,KAAM,EAAKA,MADZ,OAE5B,EAAKmB,KAAKrB,EAAOE,MAAM,GAFK,8CAK9BmB,KANO,SAMFnB,EAAcE,GACjB,IAAMJ,EAASsB,KAAKvB,QAAQwB,MAAK,SAACC,GAAD,OAAOA,EAAEtB,MAAQA,KAClDF,EAAOI,UAAYA,EAFgB,uBAIjBJ,EAAOyB,cAJU,IAInC,2BAAuC,KAA5BC,EAA4B,QACrCJ,KAAKD,KAAKK,EAAKtB,IALkB,iCAUvCuB,MArB6B,SAqBvBX,GACJ,IAAMjB,EAAU,eAAgB,IAYhC,OAVA,eAAS,wCAAC,wHACe,EAAWiB,EAAMd,MADhC,cACRH,EAAQ6B,MADA,OACuCC,KAAI,SAACL,GAAD,sBAAC,kBAAYA,GAAb,IAAgBpB,WAAW,EAAOC,QAAS,SADtF,qBAGmB,EAAcW,EAAMd,MAHvC,wCAGR,IAHQ,iBAGGF,EAHH,QAIA8B,EAAQ/B,EAAQ6B,MAAML,MAAK,SAACC,GAAD,OAAOA,EAAEtB,MAAQF,EAAOE,QACzD4B,EAAM1B,WAAY,EAClB0B,EAAMzB,QAAUL,EAAOK,SAHzB,uBAAsD,IAH9C,0EAUV,+BAASN,WAAY,kBAAqB,qB,oBCtC9C,EAAOgC,OAAS,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCTf","file":"js/chunk-87f01d0a.0f72bc7b.js","sourcesContent":["export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./plugins.vue?vue&type=style&index=1&id=3e18b600&lang=scss&scoped=true\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./plugins.vue?vue&type=style&index=1&id=3e18b600&lang=scss&scoped=true\"","<template>\n  <section class=\"plugins\">\n    <div class=\"plugin\" v-for=\"plugin of plugins\" :key=\"plugin.guid\">\n      <div class=\"plugin-description\">{{ t(`plugins.${plugin.guid}.description`) }}</div>\n      <header class=\"plugin-header\">\n        <div class=\"name\">{{ t(`plugins.${plugin.guid}.name`) }}</div>\n        <div class=\"version\" v-if=\"plugin.installed\">{{ plugin.version }}</div>\n        <div class=\"button\" @click=\"install(plugin)\" v-else>install</div>\n      </header>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { useI18n } from \"vue-i18n\";\nimport { defineComponent, onMounted, ref } from \"vue\";\nimport { clientPluginAdd, clientPlugins } from \"@/client/plugins\";\nimport { useIconsHelper } from \"@/helpers/icons\";\nimport { ApiPlugin } from \"@/api/plugins/types\";\nimport { apiPlugins } from \"@/api/plugins\";\n\ntype PluginEx = { installed: boolean; version: string } & ApiPlugin;\n\nexport default defineComponent({\n  props: {\n    guid: { required: true, type: String },\n  },\n\n  methods: {\n    async install(plugin: PluginEx) {\n      await clientPluginAdd(plugin.guid, this.guid);\n      this.mark(plugin.guid, true);\n    },\n\n    mark(guid: string, installed: boolean) {\n      const plugin = this.plugins.find((p) => p.guid == guid)!;\n      plugin.installed = installed;\n\n      for (const dep of plugin.dependencies) {\n        this.mark(dep, installed);\n      }\n    },\n  },\n\n  setup(props) {\n    const plugins = ref<PluginEx[]>([]);\n\n    onMounted(async () => {\n      plugins.value = (await apiPlugins(props.guid)).map((p) => ({ ...p, installed: false, version: \"0\" }));\n\n      for (const plugin of await clientPlugins(props.guid)) {\n        const found = plugins.value.find((p) => p.guid == plugin.guid)!;\n        found.installed = true;\n        found.version = plugin.version;\n      }\n    });\n\n    return { plugins, ...useIconsHelper(), ...useI18n() };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@use '@/styles/button.scss';\n\n.plugins {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(calc(100% / 3 - 24px), 1fr));\n  gap: 24px;\n}\n\n.plugin {\n  background-color: var(--header-bg-color);\n  box-shadow: 0 0 6px rgba(0, 0, 0, 0.7);\n  transition: var(--anim-dur) var(--anim-timing-func);\n  display: flex;\n  flex-direction: column;\n\n  &:hover {\n    background-color: var(--font-color);\n    color: var(--bg-color);\n\n    .plugin-description {\n      color: var(--bg-color);\n    }\n\n    .button {\n      background-color: var(--bg-color);\n      color: var(--font-color);\n\n      &:hover {\n        background-color: var(--font-color);\n        color: var(--bg-color);\n      }\n    }\n  }\n}\n\n.plugin-description {\n  flex-grow: 2;\n}\n\n.plugin-header {\n  border-top: 1px solid rgba(0, 0, 0, 0.4);\n  background-color: rgba(0, 0, 0, 0.1);\n  padding: 8px 16px;\n\n  display: grid;\n  grid-template-columns: min-content 1fr;\n  gap: 16px;\n}\n\n.name {\n  white-space: nowrap;\n  font-weight: 700;\n}\n\n.version {\n  justify-self: end;\n}\n\n.button {\n  justify-self: end;\n}\n\n.plugin-description {\n  padding: 16px;\n  color: var(--font-detail-color);\n}\n</style>\n\n<style lang=\"scss\" scoped>\n@media (max-width: 1900px) {\n  .plugins {\n    grid-template-columns: repeat(auto-fill, minmax(calc(100% / 3 - 24px), 1fr));\n  }\n}\n\n@media (max-width: 1600px) {\n  .plugins {\n    grid-template-columns: repeat(auto-fill, minmax(calc(100% / 2 - 24px), 1fr));\n  }\n}\n\n@media (max-width: 1000px) {\n  .plugins {\n    grid-template-columns: 1fr;\n  }\n}\n</style>\n","import { clientRequest } from '../core';\nimport { ClientPlugin } from './types';\n\nexport const clientPluginsUpdateAll = () =>\n  clientRequest('plugins', { method: 'POST', });\n\nexport const clientPlugins = (guid: string): Promise<ClientPlugin[]> =>\n  clientRequest(`plugins/${guid}`).then(response => response.json());\n\nexport const clientPluginAdd = (plugin: string, game: string) =>\n  clientRequest(`plugins/${plugin}`, {\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ game }),\n    method: 'POST',\n  });\n","import { apiRequest } from '../core';\nimport { ApiPlugin } from \"./types\";\n\nexport const apiPlugins = (guid: string): Promise<ApiPlugin[]> =>\n  apiRequest(`plugins/games/${guid}.json`).then(response => response.json());\n\n","\nimport { useI18n } from \"vue-i18n\";\nimport { defineComponent, onMounted, ref } from \"vue\";\nimport { clientPluginAdd, clientPlugins } from \"@/client/plugins\";\nimport { useIconsHelper } from \"@/helpers/icons\";\nimport { ApiPlugin } from \"@/api/plugins/types\";\nimport { apiPlugins } from \"@/api/plugins\";\n\ntype PluginEx = { installed: boolean; version: string } & ApiPlugin;\n\nexport default defineComponent({\n  props: {\n    guid: { required: true, type: String },\n  },\n\n  methods: {\n    async install(plugin: PluginEx) {\n      await clientPluginAdd(plugin.guid, this.guid);\n      this.mark(plugin.guid, true);\n    },\n\n    mark(guid: string, installed: boolean) {\n      const plugin = this.plugins.find((p) => p.guid == guid)!;\n      plugin.installed = installed;\n\n      for (const dep of plugin.dependencies) {\n        this.mark(dep, installed);\n      }\n    },\n  },\n\n  setup(props) {\n    const plugins = ref<PluginEx[]>([]);\n\n    onMounted(async () => {\n      plugins.value = (await apiPlugins(props.guid)).map((p) => ({ ...p, installed: false, version: \"0\" }));\n\n      for (const plugin of await clientPlugins(props.guid)) {\n        const found = plugins.value.find((p) => p.guid == plugin.guid)!;\n        found.installed = true;\n        found.version = plugin.version;\n      }\n    });\n\n    return { plugins, ...useIconsHelper(), ...useI18n() };\n  },\n});\n","import { render } from \"./plugins.vue?vue&type=template&id=3e18b600&scoped=true&bindings={}\"\nimport script from \"./plugins.vue?vue&type=script&lang=ts\"\nexport * from \"./plugins.vue?vue&type=script&lang=ts\"\n\nimport \"./plugins.vue?vue&type=style&index=0&id=3e18b600&lang=scss&scoped=true\"\nimport \"./plugins.vue?vue&type=style&index=1&id=3e18b600&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3e18b600\"\n\nexport default script","export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./plugins.vue?vue&type=style&index=0&id=3e18b600&lang=scss&scoped=true\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./plugins.vue?vue&type=style&index=0&id=3e18b600&lang=scss&scoped=true\""],"sourceRoot":""}